import { TransferableInput, TransferableOutput } from '../components/avax';
import { merge } from '../utils/buffer';
import {
  transferInput,
  transferInputBytes,
  transferOutput,
  transferOutputBytes,
} from './secp256k1';

// https://docs.avax.network/specs/avm-transaction-serialization#transferable-output-example
export const transferableOutputBytes = () =>
  merge([
    new Uint8Array([
      // assetID:
      0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b,
      0x0c, 0x0d, 0x0e, 0x0f, 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17,
      0x18, 0x19, 0x1a, 0x1b, 0x1c, 0x1d, 0x1e, 0x1f,
      // typeID:
      0x00, 0x00, 0x00, 0x07,
    ]),
    transferOutputBytes(),
  ]);

export const transferableOutput = () =>
  new TransferableOutput(
    '0x000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f',
    transferOutput(),
  );

// https://docs.avax.network/specs/avm-transaction-serialization#transferable-input-example
export const transferableInputBytes = () =>
  merge([
    new Uint8Array([
      // txID:
      0xf1, 0xe1, 0xd1, 0xc1, 0xb1, 0xa1, 0x91, 0x81, 0x71, 0x61, 0x51, 0x41,
      0x31, 0x21, 0x11, 0x01, 0xf0, 0xe0, 0xd0, 0xc0, 0xb0, 0xa0, 0x90, 0x80,
      0x70, 0x60, 0x50, 0x40, 0x30, 0x20, 0x10, 0x00,
      // utxoIndex:
      0x00, 0x00, 0x00, 0x05,
      // assetID:
      0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b,
      0x0c, 0x0d, 0x0e, 0x0f, 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17,
      0x18, 0x19, 0x1a, 0x1b, 0x1c, 0x1d, 0x1e, 0x1f,
      // typeID:
      0x00, 0x00, 0x00, 0x05,
    ]),
    transferInputBytes(),
  ]);

export const transferableInput = () =>
  new TransferableInput(
    '0xf1e1d1c1b1a191817161514131211101f0e0d0c0b0a090807060504030201000',
    5,
    '0x000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f',
    transferInput(),
  );
