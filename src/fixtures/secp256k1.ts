import {
  MintOutput,
  OutputOwners,
  TransferOutput,
  Input,
  TransferInput,
  MintOperation,
} from '../fxs/secp256k1';

// https://docs.avax.network/specs/avm-transaction-serialization#secp256k1-mint-output-example
export const mintOutputBytes = () =>
  new Uint8Array([
    // locktime:
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd4, 0x31,
    // threshold:
    0x00, 0x00, 0x00, 0x01,
    // number of addresses:
    0x00, 0x00, 0x00, 0x02,
    // addrs[0]:
    0x51, 0x02, 0x5c, 0x61, 0xfb, 0xcf, 0xc0, 0x78, 0xf6, 0x93, 0x34, 0xf8,
    0x34, 0xbe, 0x6d, 0xd2, 0x6d, 0x55, 0xa9, 0x55,
    // addrs[1]:
    0xc3, 0x34, 0x41, 0x28, 0xe0, 0x60, 0x12, 0x8e, 0xde, 0x35, 0x23, 0xa2,
    0x4a, 0x46, 0x1c, 0x89, 0x43, 0xab, 0x08, 0x59,
  ]);

export const mintOutput = () =>
  new MintOutput(
    new OutputOwners(54321n, 1, [
      '0x51025c61fbcfc078f69334f834be6dd26d55a955',
      '0xc3344128e060128ede3523a24a461c8943ab0859',
    ]),
  );

// https://docs.avax.network/specs/avm-transaction-serialization#secp256k1-transfer-output
export const transferOutputBytes = () =>
  new Uint8Array([
    // amount:
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x39,
    // locktime:
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd4, 0x31,
    // threshold:
    0x00, 0x00, 0x00, 0x01,
    // number of addresses:
    0x00, 0x00, 0x00, 0x02,
    // addrs[0]:
    0x51, 0x02, 0x5c, 0x61, 0xfb, 0xcf, 0xc0, 0x78, 0xf6, 0x93, 0x34, 0xf8,
    0x34, 0xbe, 0x6d, 0xd2, 0x6d, 0x55, 0xa9, 0x55,
    // addrs[1]:
    0xc3, 0x34, 0x41, 0x28, 0xe0, 0x60, 0x12, 0x8e, 0xde, 0x35, 0x23, 0xa2,
    0x4a, 0x46, 0x1c, 0x89, 0x43, 0xab, 0x08, 0x59,
  ]);

export const transferOutput = () =>
  new TransferOutput(
    12345n,
    new OutputOwners(54321n, 1, [
      '0x51025c61fbcfc078f69334f834be6dd26d55a955',
      '0xc3344128e060128ede3523a24a461c8943ab0859',
    ]),
  );

export const outputOwnerBytes = () =>
  new Uint8Array([
    // locktime:
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    // threshold:
    0x00, 0x00, 0x00, 0x01,
    // number of addresses:
    0x00, 0x00, 0x00, 0x01,
    // addrs[0]:
    0xda, 0x2b, 0xee, 0x01, 0xbe, 0x82, 0xec, 0xc0, 0x0c, 0x34, 0xf3, 0x61,
    0xed, 0xa8, 0xeb, 0x30, 0xfb, 0x5a, 0x71, 0x5c,
  ]);

export const outputOwner = () =>
  new OutputOwners(0n, 1, ['0xda2bee01be82ecc00c34f361eda8eb30fb5a715c']);

export const inputBytes = () =>
  new Uint8Array([
    // length:
    0x00, 0x00, 0x00, 0x02,
    // sig[0]
    0x00, 0x00, 0x00, 0x03,
    // sig[1]
    0x00, 0x00, 0x00, 0x07,
  ]);

export const input = () => new Input([3, 7]);

// https://docs.avax.network/specs/avm-transaction-serialization#secp256k1-transfer-input-example
export const transferInputBytes = () =>
  new Uint8Array([
    // amount:
    0x00, 0x00, 0x00, 0x00, 0x07, 0x5b, 0xcd, 0x15,
    // length:
    0x00, 0x00, 0x00, 0x02,
    // sig[0]
    0x00, 0x00, 0x00, 0x03,
    // sig[1]
    0x00, 0x00, 0x00, 0x07,
  ]);

export const transferInput = () =>
  new TransferInput(123456789n, new Input([3, 7]));

// https://docs.avax.network/specs/avm-transaction-serialization#secp256k1-mint-operation-example
export const mintOperationBytes = () =>
  new Uint8Array([
    // number of address_indices:
    0x00, 0x00, 0x00, 0x02,
    // address_indices[0]:
    0x00, 0x00, 0x00, 0x03,
    // address_indices[1]:
    0x00, 0x00, 0x00, 0x07,
    // mint output
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd4, 0x31, 0x00, 0x00, 0x00, 0x01,
    0x00, 0x00, 0x00, 0x02, 0x51, 0x02, 0x5c, 0x61, 0xfb, 0xcf, 0xc0, 0x78,
    0xf6, 0x93, 0x34, 0xf8, 0x34, 0xbe, 0x6d, 0xd2, 0x6d, 0x55, 0xa9, 0x55,
    0xc3, 0x34, 0x41, 0x28, 0xe0, 0x60, 0x12, 0x8e, 0xde, 0x35, 0x23, 0xa2,
    0x4a, 0x46, 0x1c, 0x89, 0x43, 0xab, 0x08, 0x59,
    // transfer output
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x39, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0xd4, 0x31, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x02,
    0x51, 0x02, 0x5c, 0x61, 0xfb, 0xcf, 0xc0, 0x78, 0xf6, 0x93, 0x34, 0xf8,
    0x34, 0xbe, 0x6d, 0xd2, 0x6d, 0x55, 0xa9, 0x55, 0xc3, 0x34, 0x41, 0x28,
    0xe0, 0x60, 0x12, 0x8e, 0xde, 0x35, 0x23, 0xa2, 0x4a, 0x46, 0x1c, 0x89,
    0x43, 0xab, 0x08, 0x59,
  ]);

export const mintOperation = () =>
  new MintOperation(
    new Input([3, 7]),
    new MintOutput(
      new OutputOwners(54321n, 1, [
        '0x51025c61fbcfc078f69334f834be6dd26d55a955',
        '0xc3344128e060128ede3523a24a461c8943ab0859',
      ]),
    ),
    new TransferOutput(
      12345n,
      new OutputOwners(54321n, 1, [
        '0x51025c61fbcfc078f69334f834be6dd26d55a955',
        '0xc3344128e060128ede3523a24a461c8943ab0859',
      ]),
    ),
  );
